# 算法总结报告

我们本次识别车辆和车轮主要使用了YOLOV3的算法框架，借鉴了voc数据集的训练方式，在训练过程中通过调整训练集的大小和difficult集，以及调整decay防止过拟合，调整曝光旋转等参数使得训练得出的模型更加适合使用场景。

### 基于darknet-53的网络结构

在基本的图像特征提取方面，我们使用的是基于darknet-53的网络结构（含有53个卷积层），和残差网络类似，并在一些层之间设置了快捷链路。


以下为我们使用的网络结构：

```my
layer     filters    size              input                output
    0 conv     32  3 x 3 / 1   416 x 416 x   3   ->   416 x 416 x  32  0.299 BFLOPs
    1 conv     64  3 x 3 / 2   416 x 416 x  32   ->   208 x 208 x  64  1.595 BFLOPs
    2 conv     32  1 x 1 / 1   208 x 208 x  64   ->   208 x 208 x  32  0.177 BFLOPs
    3 conv     64  3 x 3 / 1   208 x 208 x  32   ->   208 x 208 x  64  1.595 BFLOPs
    4 res    1                 208 x 208 x  64   ->   208 x 208 x  64
    5 conv    128  3 x 3 / 2   208 x 208 x  64   ->   104 x 104 x 128  1.595 BFLOPs
    6 conv     64  1 x 1 / 1   104 x 104 x 128   ->   104 x 104 x  64  0.177 BFLOPs
    7 conv    128  3 x 3 / 1   104 x 104 x  64   ->   104 x 104 x 128  1.595 BFLOPs
    8 res    5                 104 x 104 x 128   ->   104 x 104 x 128
    9 conv     64  1 x 1 / 1   104 x 104 x 128   ->   104 x 104 x  64  0.177 BFLOPs
   10 conv    128  3 x 3 / 1   104 x 104 x  64   ->   104 x 104 x 128  1.595 BFLOPs
   11 res    8                 104 x 104 x 128   ->   104 x 104 x 128
   12 conv    256  3 x 3 / 2   104 x 104 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   13 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   14 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   15 res   12                  52 x  52 x 256   ->    52 x  52 x 256
   16 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   17 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   18 res   15                  52 x  52 x 256   ->    52 x  52 x 256
   19 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   20 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   21 res   18                  52 x  52 x 256   ->    52 x  52 x 256
   22 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   23 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   24 res   21                  52 x  52 x 256   ->    52 x  52 x 256
   25 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   26 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   27 res   24                  52 x  52 x 256   ->    52 x  52 x 256
   28 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   29 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   30 res   27                  52 x  52 x 256   ->    52 x  52 x 256
   31 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   32 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   33 res   30                  52 x  52 x 256   ->    52 x  52 x 256
   34 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
   35 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
   36 res   33                  52 x  52 x 256   ->    52 x  52 x 256
   37 conv    512  3 x 3 / 2    52 x  52 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   38 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   39 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   40 res   37                  26 x  26 x 512   ->    26 x  26 x 512
   41 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   42 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   43 res   40                  26 x  26 x 512   ->    26 x  26 x 512
   44 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   45 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   46 res   43                  26 x  26 x 512   ->    26 x  26 x 512
   47 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   48 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   49 res   46                  26 x  26 x 512   ->    26 x  26 x 512
   50 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   51 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   52 res   49                  26 x  26 x 512   ->    26 x  26 x 512
   53 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   54 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   55 res   52                  26 x  26 x 512   ->    26 x  26 x 512
   56 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   57 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   58 res   55                  26 x  26 x 512   ->    26 x  26 x 512
   59 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   60 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   61 res   58                  26 x  26 x 512   ->    26 x  26 x 512
   62 conv   1024  3 x 3 / 2    26 x  26 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   63 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   64 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   65 res   62                  13 x  13 x1024   ->    13 x  13 x1024
   66 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   67 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   68 res   65                  13 x  13 x1024   ->    13 x  13 x1024
   69 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   70 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   71 res   68                  13 x  13 x1024   ->    13 x  13 x1024
   72 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   73 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   74 res   71                  13 x  13 x1024   ->    13 x  13 x1024
   75 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   76 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   77 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   78 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   79 conv    512  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x 512  0.177 BFLOPs
   80 conv   1024  3 x 3 / 1    13 x  13 x 512   ->    13 x  13 x1024  1.595 BFLOPs
   81 conv     36  1 x 1 / 1    13 x  13 x1024   ->    13 x  13 x  36  0.012 BFLOPs
   82 yolo
   83 route  79
   84 conv    256  1 x 1 / 1    13 x  13 x 512   ->    13 x  13 x 256  0.044 BFLOPs
   85 upsample            2x    13 x  13 x 256   ->    26 x  26 x 256
   86 route  85 61
   87 conv    256  1 x 1 / 1    26 x  26 x 768   ->    26 x  26 x 256  0.266 BFLOPs
   88 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   89 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   90 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   91 conv    256  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x 256  0.177 BFLOPs
   92 conv    512  3 x 3 / 1    26 x  26 x 256   ->    26 x  26 x 512  1.595 BFLOPs
   93 conv     36  1 x 1 / 1    26 x  26 x 512   ->    26 x  26 x  36  0.025 BFLOPs
   94 yolo
   95 route  91
   96 conv    128  1 x 1 / 1    26 x  26 x 256   ->    26 x  26 x 128  0.044 BFLOPs
   97 upsample            2x    26 x  26 x 128   ->    52 x  52 x 128
   98 route  97 36
   99 conv    128  1 x 1 / 1    52 x  52 x 384   ->    52 x  52 x 128  0.266 BFLOPs
  100 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
  101 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
  102 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
  103 conv    128  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x 128  0.177 BFLOPs
  104 conv    256  3 x 3 / 1    52 x  52 x 128   ->    52 x  52 x 256  1.595 BFLOPs
  105 conv     36  1 x 1 / 1    52 x  52 x 256   ->    52 x  52 x  36  0.050 BFLOPs
  106 yolo 
  
```

convolutional层可以学习权重和偏移，构成网络的主要部分。
residual层是借鉴残差网络，实现快捷链路，防止网络层数过深导致的梯度爆炸
upsample层实现了上采样，为了将采样后的特征图进行融合引入了拼接（route）最后融合的特征图以三个不同的大小13\*13,26\*26，52\*52输入给yolo层，得到最后目标的位置和分类信息 
yolo层指定了anchors等信息，计算loss

我们使用的loss函数:
        loss存储在net->cost中，对loss的计算包括：
        检测框没有对应的真实框或者iou低于0.5时，**根据no_obj_confidence_loss得到的部分**

​       			```	*(l.cost) -= l.noobject_scale * pow(l.output[p_index], 2);
​                	*(l.cost) += l.object_scale * pow(1-l.output[p_index], 2);  ```

​       **分类误差**
​                ` *(l.cost) += l.class_scale * pow(net.truth[truth_index+1+j] - l.output[class_index+j], 2); `
​                

​    **对iou误差也进行了计算**
​            `*(l.cost) += pow(1-iou, 2);`

这样通过多个角度对loss进行计算保证了模型可以快速准确的迭代

使用了三个不同尺度的特征图对对象进行检测，扩大了感受野的变化范围，更加适用于大尺度和小尺度的物体检测。
使用了9种先验框，可以使位于高频出现位置的目标被快速准确地识别到，并且这9种先验框对应不同的尺度，覆盖全面。



### 模型训练调参记录和得到的效果

##### 调整训练集集中训练数量较少的类：

​    模型训练初期，我们仅仅训练了三个类别：car, front,rear模型快速达到收敛并且取得了较好的检测结果。但后来发现还有其他类别需要识别，便将不含稀有类的图片剔除，重新训练，很快，不常见类也能较为准确地识别出来

##### 克服过拟合：

​    测试组的同学认为我们针对验证集准确率高于测试集，正视方向的准确率大于侧视方向，应该是出现了过拟合现象，我们通过调整曝光率，旋转角度，色调，decay等值，修改最后一层yolo的参数，重新训练，最后将这种情况得到了缓解

##### 模型测试得到的效果--recall

​    我们自己测试的结果中recall大多达到了80%以上，但是iou比较低均值约为60%，以下是在自己电脑上得到的结果，验证集取自训练集中的任意300张图片：

```
 0     0     0	RPs/Img: 4.00	IOU: -nan%	Recall:-nan%
    1     1     1	RPs/Img: 3.50	IOU: 53.48%	Recall:100.00%
    2     4     7	RPs/Img: 4.67	IOU: 44.03%	Recall:57.14%
    3     5     8	RPs/Img: 4.00	IOU: 48.54%	Recall:62.50%
    4     6     9	RPs/Img: 3.60	IOU: 52.12%	Recall:66.67%
    5    12    15	RPs/Img: 4.50	IOU: 61.30%	Recall:80.00%
    6    14    17	RPs/Img: 4.29	IOU: 61.47%	Recall:82.35%
    7    15    19	RPs/Img: 4.25	IOU: 59.23%	Recall:78.95%
    8    16    20	RPs/Img: 3.89	IOU: 60.24%	Recall:80.00%
    9    17    21	RPs/Img: 4.00	IOU: 60.68%	Recall:80.95%
   10    26    30	RPs/Img: 4.45	IOU: 63.98%	Recall:86.67%
   11    26    30	RPs/Img: 4.50	IOU: 63.98%	Recall:86.67%
   12    30    34	RPs/Img: 4.69	IOU: 64.89%	Recall:88.24%
   13    37    42	RPs/Img: 5.00	IOU: 65.62%	Recall:88.10%
   14    38    44	RPs/Img: 4.87	IOU: 64.89%	Recall:86.36%
   15    41    47	RPs/Img: 4.75	IOU: 65.37%	Recall:87.23%
   16    42    48	RPs/Img: 4.53	IOU: 65.42%	Recall:87.50%
   17    49    56	RPs/Img: 4.89	IOU: 65.71%	Recall:87.50%
   18    50    60	RPs/Img: 5.11	IOU: 63.54%	Recall:83.33%
   19    55    65	RPs/Img: 5.20	IOU: 63.80%	Recall:84.62%
   20    60    70	RPs/Img: 5.52	IOU: 64.49%	Recall:85.71%
   21    68    79	RPs/Img: 5.95	IOU: 64.56%	Recall:86.08%
   22    69    83	RPs/Img: 5.96	IOU: 62.87%	Recall:83.13%
   23    71    85	RPs/Img: 5.83	IOU: 63.19%	Recall:83.53%
   24    71    85	RPs/Img: 5.84	IOU: 63.19%	Recall:83.53%
   25    86   101	RPs/Img: 6.27	IOU: 63.45%	Recall:85.15%
   26    89   104	RPs/Img: 6.15	IOU: 63.66%	Recall:85.58%
   27   100   117	RPs/Img: 6.46	IOU: 63.91%	Recall:85.47%
   28   106   124	RPs/Img: 6.76	IOU: 64.08%	Recall:85.48%
   29   114   133	RPs/Img: 6.97	IOU: 64.32%	Recall:85.71%
   30   115   137	RPs/Img: 6.97	IOU: 63.21%	Recall:83.94%
   31   127   153	RPs/Img: 7.28	IOU: 63.12%	Recall:83.01%
   32   129   155	RPs/Img: 7.15	IOU: 63.30%	Recall:83.23%
   33   130   156	RPs/Img: 6.97	IOU: 63.39%	Recall:83.33%
   34   133   159	RPs/Img: 6.86	IOU: 63.46%	Recall:83.65%
   35   135   162	RPs/Img: 6.81	IOU: 63.29%	Recall:83.33%
   36   142   169	RPs/Img: 6.92	IOU: 63.63%	Recall:84.02%
   37   142   169	RPs/Img: 6.76	IOU: 63.63%	Recall:84.02%
   38   144   171	RPs/Img: 6.64	IOU: 63.65%	Recall:84.21%
   39   147   175	RPs/Img: 6.62	IOU: 63.91%	Recall:84.00%
   40   148   176	RPs/Img: 6.51	IOU: 63.96%	Recall:84.09%
   41   150   179	RPs/Img: 6.50	IOU: 63.55%	Recall:83.80%
   42   156   185	RPs/Img: 6.56	IOU: 63.81%	Recall:84.32%
   43   159   188	RPs/Img: 6.50	IOU: 63.75%	Recall:84.57%
   44   160   189	RPs/Img: 6.44	IOU: 63.78%	Recall:84.66%
   45   161   193	RPs/Img: 6.48	IOU: 63.42%	Recall:83.42%
   46   169   202	RPs/Img: 6.60	IOU: 63.77%	Recall:83.66%
   47   170   203	RPs/Img: 6.48	IOU: 63.80%	Recall:83.74%
   48   171   204	RPs/Img: 6.39	IOU: 63.86%	Recall:83.82%
   49   183   221	RPs/Img: 6.60	IOU: 63.45%	Recall:82.81%
   50   188   226	RPs/Img: 6.61	IOU: 63.68%	Recall:83.19%
   51   188   226	RPs/Img: 6.52	IOU: 63.68%	Recall:83.19%
   52   194   233	RPs/Img: 6.60	IOU: 63.93%	Recall:83.26%
   53   200   243	RPs/Img: 6.72	IOU: 63.63%	Recall:82.30%
   54   201   245	RPs/Img: 6.67	IOU: 63.38%	Recall:82.04%
   55   204   248	RPs/Img: 6.66	IOU: 63.47%	Recall:82.26%
   56   213   257	RPs/Img: 6.79	IOU: 63.77%	Recall:82.88%
   57   219   263	RPs/Img: 6.86	IOU: 63.89%	Recall:83.27%
   58   220   264	RPs/Img: 6.76	IOU: 63.94%	Recall:83.33%


```



训练过程产生的iou，置信度等参数均表现较好，相对于验证集而言表现更好，说明仍有一点过拟合。

```
Region 82 Avg IOU: 0.916350, Class: 0.999757, Obj: 0.999931, No Obj: 0.001977, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.846631, Class: 0.999992, Obj: 0.999699, No Obj: 0.000495, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.825129, Class: 0.999971, Obj: 0.998992, No Obj: 0.000745, .5R: 1.000000, .75R: 0.800000,  count: 5
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000004, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.984636, Class: 0.999976, Obj: 0.999688, No Obj: 0.001002, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.863451, Class: 0.996664, Obj: 0.802244, No Obj: 0.000820, .5R: 1.000000, .75R: 1.000000,  count: 5
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000381, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.934268, Class: 0.999992, Obj: 0.999993, No Obj: 0.000173, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: 0.933762, Class: 0.999616, Obj: 0.999934, No Obj: 0.006413, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 94 Avg IOU: 0.825636, Class: 0.994586, Obj: 0.667361, No Obj: 0.000997, .5R: 1.000000, .75R: 0.666667,  count: 3
Region 106 Avg IOU: 0.784611, Class: 0.999223, Obj: 0.973473, No Obj: 0.002211, .5R: 1.000000, .75R: 0.666667,  count: 9
Region 82 Avg IOU: 0.927004, Class: 1.000000, Obj: 0.999999, No Obj: 0.001973, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.868370, Class: 0.995780, Obj: 0.936066, No Obj: 0.003556, .5R: 1.000000, .75R: 1.000000,  count: 3
Region 106 Avg IOU: 0.788503, Class: 0.994201, Obj: 0.851430, No Obj: 0.001749, .5R: 1.000000, .75R: 0.666667,  count: 9
Region 82 Avg IOU: 0.943316, Class: 0.999993, Obj: 0.999936, No Obj: 0.005914, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.891033, Class: 0.999762, Obj: 0.985452, No Obj: 0.005132, .5R: 1.000000, .75R: 0.800000,  count: 5
Region 106 Avg IOU: 0.840647, Class: 0.999937, Obj: 0.977220, No Obj: 0.001593, .5R: 1.000000, .75R: 1.000000,  count: 7
Region 82 Avg IOU: 0.953259, Class: 1.000000, Obj: 0.999998, No Obj: 0.003939, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.927138, Class: 0.999988, Obj: 0.999333, No Obj: 0.001695, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.856881, Class: 0.999905, Obj: 0.981954, No Obj: 0.001667, .5R: 1.000000, .75R: 1.000000,  count: 9
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.915778, Class: 0.999517, Obj: 0.991605, No Obj: 0.002055, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 106 Avg IOU: 0.787163, Class: 0.999958, Obj: 0.988858, No Obj: 0.000572, .5R: 1.000000, .75R: 1.000000,  count: 3
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.860591, Class: 0.999999, Obj: 0.999993, No Obj: 0.000147, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: 0.913917, Class: 0.999979, Obj: 0.999968, No Obj: 0.007740, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.885893, Class: 0.999885, Obj: 0.999272, No Obj: 0.003781, .5R: 1.000000, .75R: 1.000000,  count: 5
Region 106 Avg IOU: 0.809501, Class: 0.999937, Obj: 0.999166, No Obj: 0.001571, .5R: 1.000000, .75R: 0.857143,  count: 7
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.878876, Class: 0.999992, Obj: 0.994793, No Obj: 0.000755, .5R: 1.000000, .75R: 1.000000,  count: 3
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.779077, Class: 0.999058, Obj: 0.973759, No Obj: 0.002973, .5R: 1.000000, .75R: 0.500000,  count: 4
Region 106 Avg IOU: 0.796254, Class: 0.986530, Obj: 0.993499, No Obj: 0.000679, .5R: 1.000000, .75R: 0.666667,  count: 3
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.937851, Class: 0.999996, Obj: 0.999820, No Obj: 0.000268, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.961861, Class: 0.999964, Obj: 0.999316, No Obj: 0.001267, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.848481, Class: 0.999954, Obj: 0.999670, No Obj: 0.000657, .5R: 1.000000, .75R: 1.000000,  count: 3
Region 82 Avg IOU: 0.848561, Class: 0.866509, Obj: 0.999945, No Obj: 0.007352, .5R: 1.000000, .75R: 0.666667,  count: 3
Region 94 Avg IOU: 0.847319, Class: 0.999476, Obj: 0.999851, No Obj: 0.001694, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 106 Avg IOU: 0.821237, Class: 0.999964, Obj: 0.998746, No Obj: 0.001417, .5R: 1.000000, .75R: 0.666667,  count: 6
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.848622, Class: 0.999993, Obj: 0.996386, No Obj: 0.000602, .5R: 1.000000, .75R: 1.000000,  count: 3
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000442, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.921636, Class: 0.999991, Obj: 0.999740, No Obj: 0.000257, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: 0.922868, Class: 0.999995, Obj: 0.998931, No Obj: 0.003943, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.948341, Class: 0.999977, Obj: 0.999192, No Obj: 0.001932, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 106 Avg IOU: 0.775989, Class: 0.999992, Obj: 0.990387, No Obj: 0.001203, .5R: 1.000000, .75R: 0.714286,  count: 7
Region 82 Avg IOU: 0.959154, Class: 0.999999, Obj: 0.999990, No Obj: 0.003944, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.893454, Class: 0.999933, Obj: 0.998530, No Obj: 0.000940, .5R: 1.000000, .75R: 1.000000,  count: 5
Region 82 Avg IOU: 0.948891, Class: 0.999994, Obj: 0.999999, No Obj: 0.006338, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 94 Avg IOU: 0.879517, Class: 0.999684, Obj: 0.990886, No Obj: 0.002670, .5R: 1.000000, .75R: 1.000000,  count: 4
Region 106 Avg IOU: 0.817918, Class: 0.999996, Obj: 0.999202, No Obj: 0.001390, .5R: 1.000000, .75R: 0.833333,  count: 6
Region 82 Avg IOU: 0.927773, Class: 1.000000, Obj: 1.000000, No Obj: 0.003999, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.926528, Class: 0.999995, Obj: 0.999990, No Obj: 0.001005, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.828732, Class: 0.999914, Obj: 0.995015, No Obj: 0.001079, .5R: 1.000000, .75R: 0.833333,  count: 6
Region 82 Avg IOU: 0.905919, Class: 0.999849, Obj: 0.999821, No Obj: 0.002173, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.921399, Class: 0.999992, Obj: 0.999211, No Obj: 0.002404, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 106 Avg IOU: 0.816134, Class: 0.999907, Obj: 0.965655, No Obj: 0.001953, .5R: 1.000000, .75R: 0.800000,  count: 10
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.908740, Class: 1.000000, Obj: 0.999997, No Obj: 0.000990, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.771915, Class: 0.999958, Obj: 0.932373, No Obj: 0.001750, .5R: 1.000000, .75R: 0.636364,  count: 11
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.854195, Class: 0.999997, Obj: 0.996417, No Obj: 0.001918, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.860185, Class: 0.999985, Obj: 0.997939, No Obj: 0.000621, .5R: 1.000000, .75R: 1.000000,  count: 4
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.891677, Class: 1.000000, Obj: 0.999941, No Obj: 0.000303, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: 0.890263, Class: 1.000000, Obj: 1.000000, No Obj: 0.001973, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.829253, Class: 0.999770, Obj: 0.993368, No Obj: 0.001112, .5R: 1.000000, .75R: 0.833333,  count: 6
Region 82 Avg IOU: 0.950064, Class: 1.000000, Obj: 0.999999, No Obj: 0.003434, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: 0.925333, Class: 0.999462, Obj: 0.941555, No Obj: 0.001727, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.776695, Class: 0.999922, Obj: 0.971125, No Obj: 0.001005, .5R: 1.000000, .75R: 0.666667,  count: 6
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000001, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.956868, Class: 0.999862, Obj: 0.999611, No Obj: 0.000555, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.761272, Class: 0.999889, Obj: 0.998541, No Obj: 0.000124, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.814893, Class: 0.999635, Obj: 0.940851, No Obj: 0.000588, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 106 Avg IOU: 0.844321, Class: 0.999999, Obj: 0.959616, No Obj: 0.000134, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 82 Avg IOU: 0.887016, Class: 0.999999, Obj: 0.999982, No Obj: 0.003936, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.829700, Class: 0.999882, Obj: 0.914203, No Obj: 0.000654, .5R: 1.000000, .75R: 0.666667,  count: 3
Region 82 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000000, .5R: -nan, .75R: -nan,  count: 0
Region 94 Avg IOU: 0.850224, Class: 0.999750, Obj: 0.999815, No Obj: 0.001260, .5R: 1.000000, .75R: 1.000000,  count: 2
Region 106 Avg IOU: 0.749444, Class: 0.999997, Obj: 0.991961, No Obj: 0.000263, .5R: 1.000000, .75R: 0.000000,  count: 1
Region 82 Avg IOU: 0.988156, Class: 1.000000, Obj: 0.999997, No Obj: 0.001972, .5R: 1.000000, .75R: 1.000000,  count: 1
Region 94 Avg IOU: -nan, Class: -nan, Obj: -nan, No Obj: 0.000012, .5R: -nan, .75R: -nan,  count: 0
Region 106 Avg IOU: 0.864594, Class: 0.999991, Obj: 0.998903, No Obj: 0.000735, .5R: 1.000000, .75R: 1.000000,  count: 4
48101: 0.285852, 0.285852 avg, 0.000010 rate, 30.856258 seconds, 1539232 images
Loaded: 0.000043 seconds


```



### 结果可视化：

我们设定阈值为50%将所有结果用图片的形式标记了出来，大部分表现良好，部分出现前后轮区分不明显，少部分有car的标记框过大的情况。由于对truck, person, rider,bus等训练较少，并且中间更改标签集出现过失误，因此效果并不好。

